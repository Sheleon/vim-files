-module(wac_manual).
-export([init/1, to_html/2]).
-export([generate_etag/2, encodings_provided/2]).

-include_lib("webmachine/include/webmachine.hrl").

init([]) -> {ok, undefined}.

to_html(ReqData, State) ->
    {generate_output(), ReqData, State}.

generate_output() -> 
    Output = "Click an endpoint to get its details:<ul>"
            "<li><a href='/static/'>Static</a> -- storage of simple files</li>"
            "<li><a href='/songs/'>Songs</a> -- storage of complex songs</li>"
            "<li><a href='/session/'>Session</a> -- place to get authentication tokens</li>",
    Output.

generate_etag(ReqData, State) ->
    {mochihex:to_hex(generate_output()), ReqData, State}.

encodings_provided(ReqData, State) ->
    {[{"gzip", fun(X) -> zlib:gzip(X) end}], ReqData, State}.
