-module(ole_rest_sup).
-behaviour(supervisor).

-export([
    start_link/1, 
    init/1
]).

start_link(Options) ->
    supervisor:start_link(?MODULE, [Options]).

init([Options]) ->
    MisultinChild = {
        ole_rest_misultin,
        {misultin, start_link, [Options]},
        permanent,
        infinity,
        supervisor,
        [ole_rest_misultin]
    },
    HandlerChild = {
        ole_rest_server,
        {ole_rest_server, start_link, []},
        permanent,
        60000,
        worker,
        [ole_rest_server]
    },
    Children = [MisultinChild, HandlerChild],
    RestartStrategy = {one_for_all, 10, 30},
    {ok, {RestartStrategy, Children}}.
